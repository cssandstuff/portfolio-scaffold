var app=function(){"use strict";function e(){}const n=e=>e;function t(e){return e()}function i(){return Object.create(null)}function o(e){e.forEach(t)}function r(e){return"function"==typeof e}function l(e,n){return e!=e?n==n:e!==n||e&&"object"==typeof e||"function"==typeof e}function a(e,n,t){const i=n.subscribe(t);e.$$.on_destroy.push(i.unsubscribe?()=>i.unsubscribe():i)}const c=new Set;let s,d=!1;function m(){c.forEach(e=>{e[0](window.performance.now())||(c.delete(e),e[1]())}),(d=c.size>0)&&requestAnimationFrame(m)}function u(e){let n;return d||(d=!0,requestAnimationFrame(m)),{promise:new Promise(t=>{c.add(n=[e,t])}),abort(){c.delete(n)}}}function g(e,n){e.appendChild(n)}function f(e,n,t){e.insertBefore(n,t||null)}function $(e){e.parentNode.removeChild(e)}function p(e,n){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(n)}function v(e){return document.createElement(e)}function h(e){return document.createTextNode(e)}function y(){return h(" ")}function w(){return h("")}function b(e,n,t,i){return e.addEventListener(n,t,i),()=>e.removeEventListener(n,t,i)}function x(e,n){n=""+n,e.data!==n&&(e.data=n)}function k(e,n,t){e.style.setProperty(n,t)}function _(e,n,t){e.classList[t?"add":"remove"](n)}let C,E=0,P={};function N(e,n,t,i,o,r,l,a=0){const c=16.666/i;let d="{\n";for(let e=0;e<=1;e+=c){const i=n+(t-n)*r(e);d+=100*e+`%{${l(i,1-i)}}\n`}const m=d+`100% {${l(t,1-t)}}\n}`,u=`__svelte_${function(e){let n=5381,t=e.length;for(;t--;)n=(n<<5)-n^e.charCodeAt(t);return n>>>0}(m)}_${a}`;if(!P[u]){if(!s){const e=v("style");document.head.appendChild(e),s=e.sheet}P[u]=!0,s.insertRule(`@keyframes ${u} ${m}`,s.cssRules.length)}const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${u} ${i}ms linear ${o}ms 1 both`,E+=1,u}function L(e,n){e.style.animation=(e.style.animation||"").split(", ").filter(n?e=>e.indexOf(n)<0:e=>-1===e.indexOf("__svelte")).join(", "),n&&!--E&&requestAnimationFrame(()=>{if(E)return;let e=s.cssRules.length;for(;e--;)s.deleteRule(e);P={}})}function G(e){C=e}function J(){if(!C)throw new Error("Function called outside component initialization");return C}function j(e){J().$$.on_mount.push(e)}function S(){const e=C;return(n,t)=>{const i=e.$$.callbacks[n];if(i){const o=function(e,n){const t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,n),t}(n,t);i.slice().forEach(n=>{n.call(e,o)})}}}const B=[],O=Promise.resolve();let q=!1;const R=[],T=[],Y=[];function I(e){R.push(e)}function X(e){T.push(e)}function z(){const e=new Set;do{for(;B.length;){const e=B.shift();G(e),A(e.$$)}for(;R.length;)R.shift()();for(;T.length;){const n=T.pop();e.has(n)||(n(),e.add(n))}}while(B.length);for(;Y.length;)Y.pop()();q=!1}function A(e){e.fragment&&(e.update(e.dirty),o(e.before_render),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_render.forEach(X))}let F,H;function D(){return F||(F=Promise.resolve()).then(()=>{F=null}),F}function M(){H={remaining:0,callbacks:[]}}function V(){H.remaining||o(H.callbacks)}function W(e){H.callbacks.push(e)}function K(t,i,r){let l,a=i(t,r),c=!0;const s=H;function d(){const{delay:i=0,duration:r=300,easing:d=n,tick:m=e,css:g}=a;g&&(l=N(t,1,0,r,i,d,g));const f=window.performance.now()+i,$=f+r;u(e=>{if(c){if(e>=$)return m(0,1),--s.remaining||o(s.callbacks),!1;if(e>=f){const n=d((e-f)/r);m(1-n,n)}}return c})}return s.remaining+=1,"function"==typeof a?D().then(()=>{a=a(),d()}):d(),{end(e){e&&a.tick&&a.tick(1,0),c&&(l&&L(t,l),c=!1)}}}function Q(e,n,i){const{fragment:l,on_mount:a,on_destroy:c,after_render:s}=e.$$;l.m(n,i),X(()=>{const n=a.map(t).filter(r);c?c.push(...n):o(n),e.$$.on_mount=[]}),s.forEach(X)}function U(e,n){e.$$.dirty||(B.push(e),q||(q=!0,O.then(z)),e.$$.dirty={}),e.$$.dirty[n]=!0}function Z(n,t,r,l,a,c){const s=C;G(n);const d=t.props||{},m=n.$$={fragment:null,ctx:null,props:c,update:e,not_equal:a,bound:i(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(s?s.$$.context:[]),callbacks:i(),dirty:null};let u=!1;var g;m.ctx=r?r(n,d,(e,t)=>{m.ctx&&a(m.ctx[e],m.ctx[e]=t)&&(m.bound[e]&&m.bound[e](t),u&&U(n,e))}):d,m.update(),u=!0,o(m.before_render),m.fragment=l(m.ctx),t.target&&(t.hydrate?m.fragment.l((g=t.target,Array.from(g.childNodes))):m.fragment.c(),t.intro&&n.$$.fragment.i&&n.$$.fragment.i(),Q(n,t.target,t.anchor),z()),G(s)}class ee{$destroy(){var n,t;t=!0,(n=this).$$&&(o(n.$$.on_destroy),n.$$.fragment.d(t),n.$$.on_destroy=n.$$.fragment=null,n.$$.ctx={}),this.$destroy=e}$on(e,n){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{const e=t.indexOf(n);-1!==e&&t.splice(e,1)}}$set(){}}function ne(e){var n;return{c(){(n=v("div")).className="loader svelte-m5fr7l",k(n,"background","#ccc")},m(e,t){f(e,n,t)},d(e){e&&$(n)}}}function te(n){var t,i,o,r,l=!n.visible&&ne();return{c(){t=v("img"),o=y(),l&&l.c(),r=w(),t.src=n.image,t.alt="",t.className=i=(n.visible?"":"opacity--0")+" svelte-m5fr7l"},m(e,n){f(e,t,n),f(e,o,n),l&&l.m(e,n),f(e,r,n)},p(e,n){e.image&&(t.src=n.image),e.visible&&i!==(i=(n.visible?"":"opacity--0")+" svelte-m5fr7l")&&(t.className=i),n.visible?l&&(l.d(1),l=null):l||((l=ne()).c(),l.m(r.parentNode,r))},i:e,o:e,d(e){e&&($(t),$(o)),l&&l.d(e),e&&$(r)}}}function ie(e,n,t){let{image:i,visible:o=0}=n;const r=S();return j(async()=>{const e=await fetch(i);if(200===e.status){t("image",i=e.url);const n=new Image;n.onload=(()=>{t("visible",o=!0),r("loadingComplete",{loadingComplete:1})}),n.src=i}else t("visible",o=!1)}),e.$set=(e=>{"image"in e&&t("image",i=e.image),"visible"in e&&t("visible",o=e.visible)}),{image:i,visible:o}}class oe extends ee{constructor(e){super(),Z(this,e,ie,te,l,["image","visible"])}}function re(n,t=e){let i;const o=[];function r(e){if(l(n,e)){if(n=e,!i)return;o.forEach(e=>e[1]()),o.forEach(e=>e[0](n))}}return{set:r,update:function(e){r(e(n))},subscribe:function(l,a=e){const c=[l,a];return o.push(c),1===o.length&&(i=t(r)||e),l(n),()=>{const e=o.indexOf(c);-1!==e&&o.splice(e,1),0===o.length&&i()}}}}const le=re(!1),ae=re(0),ce=re(!1);function se(e,n,t){const i=Object.create(e);return i.image=n[t],i.index=t,i}function de(e,n,t){const i=Object.create(e);return i.image=n[t],i.index=t,i}function me(e){var n,t,i,o,r,l,a=new oe({props:{image:e.lowresdir+"/"+e.image.src}});function c(...n){return e.click_handler(e,...n)}return a.$on("loadingComplete",e.loadingComplete_handler),{c(){n=v("a"),a.$$.fragment.c(),t=y(),(i=v("span")).className="magnify svelte-qej709",n.href=o=e.hiresdir+"/"+e.image.src,n.className="svelte-qej709",l=b(n,"click",c)},m(e,o){f(e,n,o),Q(a,n,null),g(n,t),g(n,i),r=!0},p(t,i){e=i;var l={};(t.lowresdir||t.stack)&&(l.image=e.lowresdir+"/"+e.image.src),a.$set(l),r&&!t.hiresdir&&!t.stack||o===(o=e.hiresdir+"/"+e.image.src)||(n.href=o)},i(e){r||(a.$$.fragment.i(e),r=!0)},o(e){a.$$.fragment.o(e),r=!1},d(e){e&&$(n),a.$destroy(),l()}}}function ue(e){for(var n,t,i,r,l,a,c,s,d,m=e.stack,u=[],h=0;h<m.length;h+=1)u[h]=ge(se(e,m,h));function w(e,n,t){u[e]&&(n&&W(()=>{u[e].d(n),u[e]=null}),u[e].o(t))}return{c(){n=v("div");for(var o=0;o<u.length;o+=1)u[o].c();t=y(),i=v("span"),r=y(),l=v("span"),a=y(),(c=v("span")).textContent="close",i.className="previous svelte-qej709",l.className="next svelte-qej709",c.className="close svelte-qej709",n.className="hires svelte-qej709",d=[b(i,"click",e.showPrevious),b(l,"click",e.showNext),b(c,"click",e.closeGallery)]},m(o,d){f(o,n,d);for(var m=0;m<u.length;m+=1)u[m].m(n,null);g(n,t),g(n,i),g(n,r),g(n,l),g(n,a),g(n,c),I(()=>e.div_binding_1(n,null)),s=!0},p(e,i){if(e.current||e.hiresdir||e.stack||e.handleLoadingHiResComplete){m=i.stack;for(var o=0;o<m.length;o+=1){const r=se(i,m,o);u[o]?(u[o].p(e,r),u[o].i(1)):(u[o]=ge(r),u[o].c(),u[o].i(1),u[o].m(n,t))}for(M();o<u.length;o+=1)w(o,1,1);V()}e.items&&(i.div_binding_1(null,n),i.div_binding_1(n,null))},i(e){if(!s){for(var n=0;n<m.length;n+=1)u[n].i();s=!0}},o(e){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)w(e,0);s=!1},d(t){t&&$(n),p(u,t),e.div_binding_1(null,n),o(d)}}}function ge(e){var n,t,i=new oe({props:{image:e.hiresdir+"/"+e.image.src}});return i.$on("loadingComplete",e.handleLoadingHiResComplete),{c(){n=v("div"),i.$$.fragment.c(),n.className="svelte-qej709",_(n,"active",e.current===e.index)},m(e,o){f(e,n,o),Q(i,n,null),t=!0},p(e,t){var o={};(e.hiresdir||e.stack)&&(o.image=t.hiresdir+"/"+t.image.src),i.$set(o),e.current&&_(n,"active",t.current===t.index)},i(e){t||(i.$$.fragment.i(e),t=!0)},o(e){i.$$.fragment.o(e),t=!1},d(e){e&&$(n),i.$destroy()}}}function fe(e){var n,t,i,o,r,l,a=!1,c=()=>{a=!1};X(e.onwindowscroll);for(var s=e.stack,d=[],m=0;m<s.length;m+=1)d[m]=me(de(e,s,m));function u(e,n,t){d[e]&&(n&&W(()=>{d[e].d(n),d[e]=null}),d[e].o(t))}var g=e.ready&&ue(e);return{c(){t=v("div");for(var r=0;r<d.length;r+=1)d[r].c();i=y(),g&&g.c(),o=w(),t.className="stack gallery svelte-qej709",l=b(window,"scroll",()=>{a=!0,clearTimeout(n),n=setTimeout(c,100),e.onwindowscroll()})},m(n,l){f(n,t,l);for(var a=0;a<d.length;a+=1)d[a].m(t,null);I(()=>e.div_binding(t,null)),f(n,i,l),g&&g.m(n,l),f(n,o,l),r=!0},p(e,i){if(e.y&&!a&&(a=!0,clearTimeout(n),window.scrollTo(window.pageXOffset,i.y),n=setTimeout(c,100)),e.hiresdir||e.stack||e.lowresdir){s=i.stack;for(var r=0;r<s.length;r+=1){const n=de(i,s,r);d[r]?(d[r].p(e,n),d[r].i(1)):(d[r]=me(n),d[r].c(),d[r].i(1),d[r].m(t,null))}for(M();r<d.length;r+=1)u(r,1,1);V()}e.items&&(i.div_binding(null,t),i.div_binding(t,null)),i.ready?g?(g.p(e,i),g.i(1)):((g=ue(i)).c(),g.i(1),g.m(o.parentNode,o)):g&&(M(),W(()=>{g.d(1),g=null}),g.o(1),V())},i(e){if(!r){for(var n=0;n<s.length;n+=1)d[n].i();g&&g.i(),r=!0}},o(e){d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)u(e,0);g&&g.o(),r=!1},d(n){n&&$(t),p(d,n),e.div_binding(null,t),n&&$(i),g&&g.d(n),n&&$(o),l()}}}function $e(e,n,t){let i,o;a(e,le,e=>{t("$destroyingExpandedGallery",i=e)}),a(e,ce,e=>{t("$loadingSecondary",o=e)});let r,l,c,s,d,m,u,{stack:g,lowresdir:f,hiresdir:$,originaltarget:p}=n,v=!1,h=!1,y=0;function w(){let e=p.getBoundingClientRect();r.classList.add("no-pointer-events"),Object.entries(c).forEach(([n,t])=>{let o=t.getBoundingClientRect(),r=`translateX(${e.x+4-o.x}px) translateY(${e.y+4-o.y}px) rotate(${4*n}deg)`;0==n&&(r=`translateX(${e.x+4-o.x}px) translateY(${e.y+6-o.y}px) scale(1.08) translateY(5px) rotate(-2deg)`),i?(t.classList.add("quicktransition"),r=`translateX(${e.x-o.x}px) translateY(${e.y-o.y}px) rotate(${2*n}deg)`):t.parentNode.style.zIndex=s-n,t.style.transform=r})}var b;function x(e,n){t("current",m=n),e.preventDefault(),t("ready",d=!0)}return j(()=>{t("images",c=r.getElementsByTagName("img")),t("imageCount",s=r.getElementsByTagName("img").length),w()}),b=(()=>{o&&!v&&(!function(){r.style.transform=`translateY(${scrollY}px)`,t("secondLevel",r);const e=e=>new Promise(n=>setTimeout(n,e));(async()=>{await e(80),Object.entries(c).forEach(([e,n])=>{n.getBoundingClientRect(),n.classList.add("slowtransition"),n.style.transform="translateX(0px) translateY(0px)"})})(),(async()=>{await e(500),r.classList.remove("no-pointer-events")})()}(),t("ExpandedBefore",v=!0)),i&&!h&&(w(),t("ConsolidatedBefore",h=!0))}),J().$$.after_render.push(b),function(e){J().$$.on_destroy.push(e)}(()=>{console.log("being destoryed"),le.update(e=>!1)}),e.$set=(e=>{"stack"in e&&t("stack",g=e.stack),"lowresdir"in e&&t("lowresdir",f=e.lowresdir),"hiresdir"in e&&t("hiresdir",$=e.hiresdir),"originaltarget"in e&&t("originaltarget",p=e.originaltarget)}),{stack:g,lowresdir:f,hiresdir:$,originaltarget:p,secondLevel:r,thirdLevel:l,ready:d,current:m,y:u,loadLargeImages:x,handleLoadingHiResComplete:function(e){t("count",y+=e.detail.loadingComplete),y===g.length&&(t("count",y=0),document.documentElement.classList.add("locked"))},showPrevious:function(){console.log(`current image is ${m}`),console.log("go prev"),t("current",m<=0?m=g.length-1:--m),console.log(`current image is ${m}`)},showNext:function(){m>=g.length-1?t("current",m=0):t("current",++m),console.log(`current image is ${m}`)},closeGallery:function(){t("ready",d=!1),document.documentElement.classList.remove("locked")},loadingComplete_handler:function(n){!function(e,n){const t=e.$$.callbacks[n.type];t&&t.slice().forEach(e=>e(n))}(e,n)},onwindowscroll:function(){u=window.pageYOffset,t("y",u)},click_handler:function({index:e},n){return x(n,e)},div_binding:function(e,n){t("secondLevel",r=e)},div_binding_1:function(e,n){t("thirdLevel",l=e)}}}class pe extends ee{constructor(e){super(),Z(this,e,$e,fe,l,["stack","lowresdir","hiresdir","originaltarget"])}}function ve(e){const n=e-1;return n*n*n+1}function he(e,{delay:n=0,duration:t=400}){const i=+getComputedStyle(e).opacity;return{delay:n,duration:t,css:e=>`opacity: ${e*i}`}}function ye(e,{delay:n=0,duration:t=400,easing:i=ve,x:o=0,y:r=0,opacity:l=0}){const a=getComputedStyle(e),c=+a.opacity,s="none"===a.transform?"":a.transform,d=c*(1-l);return{delay:n,duration:t,easing:i,css:(e,n)=>`\n\t\t\ttransform: ${s} translate(${(1-e)*o}px, ${(1-e)*r}px);\n\t\t\topacity: ${c-d*n}`}}function we(e,n,t){const i=Object.create(e);return i.image=n[t],i.index=t,i}function be(t){var i,o,r,l,a,c,s,d,m,p,w,k,_=t.imagecollection.length;return{c(){i=v("div"),o=v("p"),r=h(t.name),l=y(),a=v("span"),c=h("("),s=h(_),d=h(" images)"),a.className="svelte-e4dvaf",o.className="svelte-e4dvaf",i.className="breadcrumb svelte-e4dvaf",k=b(i,"click",t.resetStacks)},m(e,n){f(e,i,n),g(i,o),g(o,r),g(o,l),g(o,a),g(a,c),g(a,s),g(a,d),w=!0},p(e,n){w&&!e.name||x(r,n.name),w&&!e.imagecollection||_===(_=n.imagecollection.length)||x(s,_)},i(t){w||(X(()=>{p&&p.end(1),m||(m=function(t,i,o){let r,l,a=i(t,o),c=!1,s=0;function d(){r&&L(t,r)}function m(){const{delay:i=0,duration:o=300,easing:m=n,tick:g=e,css:f}=a;f&&(r=N(t,0,1,o,i,m,f,s++)),g(0,1);const $=window.performance.now()+i,p=$+o;l&&l.abort(),c=!0,l=u(e=>{if(c){if(e>=p)return g(1,0),d(),c=!1;if(e>=$){const n=m((e-$)/o);g(n,1-n)}}return c})}let g=!1;return{start(){g||(L(t),"function"==typeof a?(a=a(),D().then(m)):m())},invalidate(){g=!1},end(){c&&(d(),c=!1)}}}(i,ye,{y:-40,duration:400})),m.start()}),w=!0)},o(e){m&&m.invalidate(),e&&(p=K(i,ye,{y:-40,duration:400})),w=!1},d(e){e&&($(i),p&&p.end()),k()}}}function xe(n){var t;return{c(){(t=v("span")).className="dummyimage svelte-e4dvaf",k(t,"transform","rotate("+2*n.index+"deg)"),k(t,"z-index","-"+n.index),k(t,"opacity",1-1/n.imagecollection.length*n.index/1.2)},m(e,n){f(e,t,n)},p(e,n){e.imagecollection&&k(t,"opacity",1-1/n.imagecollection.length*n.index/1.2)},i:e,o:e,d(e){e&&$(t)}}}function ke(e){var n,t=new oe({props:{image:e.lowresdir+"/"+e.image.src}});return{c(){t.$$.fragment.c()},m(e,i){Q(t,e,i),n=!0},p(e,n){var i={};(e.lowresdir||e.imagecollection)&&(i.image=n.lowresdir+"/"+n.image.src),t.$set(i)},i(e){n||(t.$$.fragment.i(e),n=!0)},o(e){t.$$.fragment.o(e),n=!1},d(e){t.$destroy(e)}}}function _e(e){var n,t,i,o,r=[ke,xe],l=[];function a(e){return 0==e.index?0:1}return n=a(e),t=l[n]=r[n](e),{c(){t.c(),i=w()},m(e,t){l[n].m(e,t),f(e,i,t),o=!0},p(e,o){var c=n;(n=a(o))===c?l[n].p(e,o):(M(),W(()=>{l[c].d(1),l[c]=null}),t.o(1),V(),(t=l[n])||(t=l[n]=r[n](o)).c(),t.i(1),t.m(i.parentNode,i))},i(e){o||(t&&t.i(),o=!0)},o(e){t&&t.o(),o=!1},d(e){l[n].d(e),e&&$(i)}}}function Ce(e){var n,t,i,o;let r={lowresdir:e.lowresdir,hiresdir:e.hiresdir,stack:e.imagecollection,originaltarget:e.collection};var l=new pe({props:r});return I(()=>e.galleryexpanded_binding(l)),l.$on("loadingComplete",e.handleLoadingComplete),{c(){n=v("div"),l.$$.fragment.c(),n.className=t="loading--"+e.$loadingSecondary+" svelte-e4dvaf"},m(e,t){f(e,n,t),Q(l,n,null),o=!0},p(e,i){var r={};e.lowresdir&&(r.lowresdir=i.lowresdir),e.hiresdir&&(r.hiresdir=i.hiresdir),e.imagecollection&&(r.stack=i.imagecollection),e.collection&&(r.originaltarget=i.collection),l.$set(r),o&&!e.$loadingSecondary||t===(t="loading--"+i.$loadingSecondary+" svelte-e4dvaf")||(n.className=t)},i(e){o||(l.$$.fragment.i(e),i&&i.end(1),o=!0)},o(e){l.$$.fragment.o(e),e&&(i=K(n,he,{duration:500})),o=!1},d(t){t&&$(n),e.galleryexpanded_binding(null),l.$destroy(),t&&i&&i.end()}}}function Ee(e){for(var n,t,i,r,l,a,c=e.$activeCollection==e.id&&be(e),s=e.imagecollection,d=[],m=0;m<s.length;m+=1)d[m]=_e(we(e,s,m));function u(e,n,t){d[e]&&(n&&W(()=>{d[e].d(n),d[e]=null}),d[e].o(t))}var g=e.attemptingtoLoad&&Ce(e);return{c(){c&&c.c(),n=y(),t=v("div");for(var o=0;o<d.length;o+=1)d[o].c();i=y(),g&&g.c(),r=w(),t.className="collection svelte-e4dvaf",t.dataset.id=e.id,_(t,"active",e.id===e.$activeCollection),_(t,"nonactive",0!==e.$activeCollection&&e.id!==e.$activeCollection),a=[b(t,"mouseenter",e.rotate),b(t,"mouseleave",e.unRotate),b(t,"click",e.showContents)]},m(o,a){c&&c.m(o,a),f(o,n,a),f(o,t,a);for(var s=0;s<d.length;s+=1)d[s].m(t,null);I(()=>e.div_binding(t,null)),f(o,i,a),g&&g.m(o,a),f(o,r,a),l=!0},p(e,i){if(i.$activeCollection==i.id?c?(c.p(e,i),c.i(1)):((c=be(i)).c(),c.i(1),c.m(n.parentNode,n)):c&&(M(),W(()=>{c.d(1),c=null}),c.o(1),V()),e.lowresdir||e.imagecollection){s=i.imagecollection;for(var o=0;o<s.length;o+=1){const n=we(i,s,o);d[o]?(d[o].p(e,n),d[o].i(1)):(d[o]=_e(n),d[o].c(),d[o].i(1),d[o].m(t,null))}for(M();o<d.length;o+=1)u(o,1,1);V()}e.items&&(i.div_binding(null,t),i.div_binding(t,null)),l&&!e.id||(t.dataset.id=i.id),(e.id||e.$activeCollection)&&_(t,"active",i.id===i.$activeCollection),(e.$activeCollection||e.id)&&_(t,"nonactive",0!==i.$activeCollection&&i.id!==i.$activeCollection),i.attemptingtoLoad?g?(g.p(e,i),g.i(1)):((g=Ce(i)).c(),g.i(1),g.m(r.parentNode,r)):g&&(M(),W(()=>{g.d(1),g=null}),g.o(1),V())},i(e){if(!l){c&&c.i();for(var n=0;n<s.length;n+=1)d[n].i();g&&g.i(),l=!0}},o(e){c&&c.o(),d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)u(e,0);g&&g.o(),l=!1},d(l){c&&c.d(l),l&&($(n),$(t)),p(d,l),e.div_binding(null,t),l&&$(i),g&&g.d(l),l&&$(r),o(a)}}}const Pe=new Set;function Ne(e,n,t){let i,o;a(e,ae,e=>{t("$activeCollection",i=e)}),a(e,ce,e=>{t("$loadingSecondary",o=e)});let{imagecollection:r,lowresdir:l,hiresdir:c,id:s,name:d,color:m}=n;const u=S();let g,f,$,p,v,h=0,y=!1;return j(()=>(t("fakeImages",p=g.getElementsByTagName("span")),t("firstImage",v=g.getElementsByTagName("img")[0]),Pe.add(g),()=>Pe.delete(g))),e.$set=(e=>{"imagecollection"in e&&t("imagecollection",r=e.imagecollection),"lowresdir"in e&&t("lowresdir",l=e.lowresdir),"hiresdir"in e&&t("hiresdir",c=e.hiresdir),"id"in e&&t("id",s=e.id),"name"in e&&t("name",d=e.name),"color"in e&&t("color",m=e.color)}),{imagecollection:r,lowresdir:l,hiresdir:c,id:s,name:d,color:m,collection:g,galleryExpanded:$,attemptingtoLoad:y,rotate:function(){g.style.transform="rotate(-1.5deg)",t("collection",g),Object.entries(p).forEach(([e,n])=>{n.style.transform="rotate("+(4*parseInt(e)+5)+"deg)"}),v.style.transform="scale(1.08) translateY(10px)",t("firstImage",v)},unRotate:function(){g.style.transform="rotate(0deg)",t("collection",g),Object.entries(p).forEach(([e,n])=>{n.style.transform="rotate("+2*(parseInt(e)+1)+"deg)"}),v.style.transform="scale(1)",t("firstImage",v)},showContents:function(){if(t("attemptingtoLoad",y=!0),console.log(m),t("originalbgcolor",f=getComputedStyle(document.documentElement).getPropertyValue("--bgcolor")),m){let e=m.split(",");console.log(e[0]),document.documentElement.style.setProperty("--bgcolor",`hsla(${e[0]}, ${e[1]}%, ${e[2]}%, 1)`),document.documentElement.style.setProperty("--bgcolortint",`hsla(${e[0]}, ${e[1]}%, ${e[2]}%, 0.6)`),document.documentElement.style.setProperty("--bgcolordarktint",`hsl(${e[0]}, ${e[1]}%, ${e[2]/e[1]*10}%)`)}ce.update(e=>!0),u("expand",{active:s}),function(){let e=document.documentElement.clientWidth/2,n=document.documentElement.clientHeight/2;Pe.forEach(t=>{var o=t.getBoundingClientRect();t.classList.add("notransition");let r=parseInt(t.dataset.id);r!==i&&(t.classList.add("no-pointer-events"),t.style.transform=`translateX(${o.left/3-e/3}px) translateY(${o.top/3-n/3}px)`)})}()},resetStacks:function(){console.log("resetting..."),Pe.forEach(e=>{e.classList.remove("notransition")}),document.documentElement.style.setProperty("--bgcolor",f);const e=e=>new Promise(n=>setTimeout(n,e));console.log($),le.update(e=>!0),(async()=>{await e(200),u("expand",{active:0}),t("attemptingtoLoad",y=!1),Pe.forEach(e=>{e.style.transform="translateX(0px) translateY(0px)"})})(),(async()=>{await e(400),Pe.forEach(e=>{e.classList.remove("no-pointer-events")})})()},handleLoadingComplete:function(e){t("count",h+=e.detail.loadingComplete),h===r.length&&(ce.update(e=>!1),t("count",h=0))},$activeCollection:i,$loadingSecondary:o,div_binding:function(e,n){t("collection",g=e)},galleryexpanded_binding:function(e){t("galleryExpanded",$=e)}}}class Le extends ee{constructor(e){super(),Z(this,e,Ne,Ee,l,["imagecollection","lowresdir","hiresdir","id","name","color"])}}function Ge(e){var n,t,i,o,r,l,a,c=new Le({props:{name:"Painterly",color:"261, 27, 71",lowresdir:"images",hiresdir:"images/originals",imagecollection:e.collection1,id:Je++}});c.$on("expand",je);var s=new Le({props:{name:"Travelling",color:"206, 69, 88",lowresdir:"images",hiresdir:"images/originals",imagecollection:e.collection2,id:Je++}});s.$on("expand",je);var d=new Le({props:{name:"Citizens of Science",lowresdir:"images",hiresdir:"images/originals",imagecollection:e.collection3,id:Je++}});d.$on("expand",je);var m=new Le({props:{name:"Splashes",lowresdir:"images",hiresdir:"images/originals",imagecollection:e.collection4,id:Je++}});m.$on("expand",je);var u=new Le({props:{name:"Angry at kids",lowresdir:"images",hiresdir:"images/originals",imagecollection:e.collection5,id:Je++}});u.$on("expand",je);var p=new Le({props:{name:"Sketches",lowresdir:"images",hiresdir:"images/originals",imagecollection:e.collection6,id:Je++}});return p.$on("expand",je),{c(){n=v("div"),c.$$.fragment.c(),t=y(),s.$$.fragment.c(),i=y(),d.$$.fragment.c(),o=y(),m.$$.fragment.c(),r=y(),u.$$.fragment.c(),l=y(),p.$$.fragment.c(),n.className="container svelte-rby08"},m(e,$){f(e,n,$),Q(c,n,null),g(n,t),Q(s,n,null),g(n,i),Q(d,n,null),g(n,o),Q(m,n,null),g(n,r),Q(u,n,null),g(n,l),Q(p,n,null),a=!0},p(e,n){var t={};e.collection1&&(t.imagecollection=n.collection1),e.uid&&(t.id=Je++),c.$set(t);var i={};e.collection2&&(i.imagecollection=n.collection2),e.uid&&(i.id=Je++),s.$set(i);var o={};e.collection3&&(o.imagecollection=n.collection3),e.uid&&(o.id=Je++),d.$set(o);var r={};e.collection4&&(r.imagecollection=n.collection4),e.uid&&(r.id=Je++),m.$set(r);var l={};e.collection5&&(l.imagecollection=n.collection5),e.uid&&(l.id=Je++),u.$set(l);var a={};e.collection6&&(a.imagecollection=n.collection6),e.uid&&(a.id=Je++),p.$set(a)},i(e){a||(c.$$.fragment.i(e),s.$$.fragment.i(e),d.$$.fragment.i(e),m.$$.fragment.i(e),u.$$.fragment.i(e),p.$$.fragment.i(e),a=!0)},o(e){c.$$.fragment.o(e),s.$$.fragment.o(e),d.$$.fragment.o(e),m.$$.fragment.o(e),u.$$.fragment.o(e),p.$$.fragment.o(e),a=!1},d(e){e&&$(n),c.$destroy(),s.$destroy(),d.$destroy(),m.$destroy(),u.$destroy(),p.$destroy()}}}let Je=1;function je(e){console.log(e.detail.active),ae.update(n=>e.detail.active)}function Se(e,n,t){let{name:i}=n;return e.$set=(e=>{"name"in e&&t("name",i=e.name)}),{name:i,collection1:[{src:"Noa.JPG"},{src:"dog.JPG"},{src:"glass.JPG"}],collection4:[{src:"atami.JPG"},{src:"kenodo.JPG"},{src:"kenodo2.JPG"}],collection6:[{src:"boring.JPG"},{src:"hownotto.JPG"},{src:"isometric.JPG"},{src:"notes.JPG"},{src:"glass-b+w.JPG"}],collection2:[{src:"cash.JPG"},{src:"robo.JPG"},{src:"tako.JPG"}],collection5:[{src:"angrykid2.JPG"},{src:"angrykid1.JPG"},{src:"angrykid3.JPG"},{src:"angrykid4.JPG"},{src:"angrykid5.JPG"}],collection3:[{src:"citizens.JPG"},{src:"screwit.JPG"},{src:"boltit.JPG"},{src:"kumo.JPG"}]}}return new class extends ee{constructor(e){super(),Z(this,e,Se,Ge,l,["name"])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
