{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../src/App.svelte",
    "../src/GalleryStack.svelte",
    "../src/Image.svelte",
    "../src/Spinner.svelte",
    "../src/GalleryExpanded.svelte"
  ],
  "sourcesContent": [
    "<script>\n\texport let name;\n\timport GalleryStack from './GalleryStack.svelte';\n\timport { fly } from 'svelte/transition';\n\timport { activeCollection } from './stores.js';\n\n\tlet uid = 1;\n\tlet menuHover = false;\n\tlet about = false;\n\t// Images, maybe I can make this easier somehow?\n\t// Auto-generate from a directory structure maybe?\n\t// let collection0 = [\n\t// \t{ src: '01_front_cover.jpg', name: 'Noa' },\n\t// \t{ src: '02_back_cover.jpg', name: 'Dog' },\n\t// \t{ src: 'racoon_together.jpg', name: 'Glass' }\n\t// ];\n\t\n\n\tlet collection1 = [\n\t\t{ lowres: 'images/Noa.jpg', hires: 'images/originals/Noa.jpg', name: 'Noa' },\n\t\t{ lowres: 'images/dog.jpg', hires: 'images/originals/dog.jpg', name: 'Dog' },\n\t\t{ lowres: 'images/glass.jpg', hires: 'images/originals/glass.jpg', name: 'Glass' }\n\t];\n\tlet collection2 = [\n\t\t{ lowres: 'images/cash.jpg', hires: 'images/originals/cash.jpg', name: 'Cash suitcase' },\n\t\t{ lowres: 'images/robo.jpg', hires: 'images/originals/robo.jpg', name: 'Robot' },\n\t\t{ lowres: 'images/tako.jpg', hires: 'images/originals/tako.jpg', name: 'Octopus' }\n\t];\n\tlet collection3 = [\n\t\t{ lowres: 'images/citizens.jpg', hires: 'images/originals/citizens.jpg', name: 'Citizens of science' },\n\t\t{ lowres: 'images/screwit.jpg', hires: 'images/originals/screwit.jpg', name: 'Screw It' },\n\t\t{ lowres: 'images/boltit.jpg', hires: 'images/originals/boltit.jpg', name: 'Boltman' },\n\t\t{ lowres: 'images/kumo.jpg', hires: 'images/originals/kumo.jpg', name: 'Spiderdeath' }\n\t];\n\tlet collection4 = [\n\t\t{ lowres: 'images/atami.jpg', hires: 'images/originals/atami.jpg', name: 'Atami at night' },\n\t\t{ lowres: 'images/kenodo.jpg', hires: 'images/originals/kenodo.jpg', name: 'Konodo Highway' },\n\t\t{ lowres: 'images/kenodo2.jpg', hires: 'images/originals/kenodo2.jpg', name: 'Tunnels' }\n\t];\n\tlet collection6 = [\n\t\t{ lowres: 'images/boring.jpg', hires: 'images/originals/boring.jpg', name: 'Everything is boring' },\n\t\t{ lowres: 'images/hownotto.jpg', hires: 'images/originals/hownotto.jpg', name: 'How not to draw' },\n\t\t{ lowres: 'images/isometric.jpg', hires: 'images/originals/isometric.jpg', name: 'Isometric' },\n\t\t{ lowres: 'images/notes.jpg', hires: 'images/originals/Noa.jpg', name: 'Notes' },\n\t\t{ lowres: 'images/glass-b+w.jpg', hires: 'images/originals/Noa.jpg', name: 'Glass' }\n\t];\n\tlet collection5 = [\n\t\t{ lowres: 'images/angrykid2.jpg', hires: 'images/originals/angrykid2.jpg', name: 'Angry 1' },\n\t\t{ lowres: 'images/angrykid1.jpg', hires: 'images/originals/angrykid1.jpg', name: 'Angry 2' },\n\t\t{ lowres: 'images/angrykid3.jpg', hires: 'images/originals/angrykid3.jpg', name: 'Angry 3' },\n\t\t{ lowres: 'images/angrykid4.jpg', hires: 'images/originals/angrykid4.jpg', name: 'Angry 4' },\n\t\t{ lowres: 'images/angrykid5.jpg', hires: 'images/originals/angrykid5.jpg', name: 'Angry 5' }\n\t];\n\n\n\tfunction handleHover(){\n\t\tif(menuHover){\n\t\t\tmenuHover = false;\n\t\t}else{\n\t\t\tmenuHover = true;\n\t\t}\n\t}\n\n\tfunction handleAbout(event){\n\t\tevent.preventDefault();\n\t\tif(about){\n\t\t\tabout = false;\n\t\t}else{\n\t\t\tabout = true;\n\t\t}\n\t}\n\n</script>\n\n<style>\n\t.container{\n\t\tdisplay: flex;\n\t\tflex: 1 auto;\n\t\tflex-basis: 15%;\n\t\tflex-flow: row wrap;\n\t\talign-content: flex-start;\n\t\tjustify-content: center;\n\t\tvertical-align: middle;\n\t\t\n\t\twidth: auto;\n\t\tmargin: 40px 1em 1em;\n\t}\n\t.container .links{\n\t\talign-self: center;\n\t\tpadding: 0 24px;\n\t\tcolor: #929292;\n\t\tfont-weight: 200;\n\t\ttext-decoration: none;\n\t\topacity: 0;\n\t\tposition: relative; top: -4px;\n\t\ttransition: 0.8s opacity;\n\t}\n\t.container .links.hovering{\n\t\topacity: 1;\n\t}\n\t.menu{\n\t\tpadding: 10px;\n\t\tmargin-top: -10px;\n\t}\n\t/* Experimenting with css grid...\n\t .container{\n\t\tdisplay: grid;\n\t\tgrid-template-columns: 1fr 1fr 1fr;\n\t\tgrid-template-areas: \"a a b\"\n\t\t\t\t\t\t\t\t\t\t\t\t \"c d e\"\n\t\t\t\t\t\t\t\t\t\t\t\t \"f g h\";\n\n\t\talign-content: flex-start;\n\t\tjustify-content: center;\n\t\twidth: auto;\n\t\tmargin: 40px 1em 1em;\n\t} \n\t.container :global(.collection) {\n\t\twidth: calc(100% - 3em);\n\t\tmargin: 0em 1.5em 6em 1.5em;\n\t\theight: 15em;\n\t}\n\t.container :global(.collection:first-child) {\n\t\tgrid-area: a;\n\t\theight: calc(100% - 6em);\n\t}\n\t.container :global(.galleryitem) {\n\t\twidth: calc(19em - 3em);\n\t\tmargin: 0em 1.5em 6em 1.5em;\n\t\theight: 15em;\n\t}\n\t*/\n\t.container :global(.collection, .galleryitem) {\n\t\twidth: calc(100% - 3em);\n\t\tmin-width: 16em;\n\t\tmargin: 0em 1.5em 6em 1.5em;\n\t\theight: 15em;\n\t}\n\n\t.stacks-logo{\n\t\tdisplay: inline-block;\n\t\tpadding: 15px 7px 8px;\n\t\tposition: relative;\n\t}\n\t.stacks-logo svg{\n\t\tposition: relative;\n\t\tz-index: 2;\n\t\tfill: var(--dark);\n\t\ttransition: 0.3s all;\n\t}\n\t.stacks-logo:before{\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tbackground: rgba(151,151,151, 0.23);\n\t\twidth: 100%; height: 100%;\n\t\ttransform: rotate(13deg);\n\t\tz-index: 1;\n    position: absolute;\n    top: 0;\n    left: 0;\n\t\tborder-radius: 3px; \n\t\ttransition: 0.3s all;\n\t}\n\t.stacks-logo:after{\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tbackground: var(--light);\n\t\tborder: 1px solid rgba(151,151,151, 0.23);\n\t\twidth: 100%; height: 100%;\n\t\ttransform: rotate(0deg);\n\t\tz-index: 1;\n    position: absolute;\n    top: 0;\n    left: -1px;\n\t\tborder-radius: 3px; \n\t\ttransition: 0.3s all;\n\t}\n\t.stacks-logo.hovering:before{\n\t\ttransform: rotate(0deg);\n\t}\n\t.stacks-logo.hovering:after{\n\t\tbackground: var(--dark);\n\t\ttransform: rotate(-5deg);\n\t}\n\t.stacks-logo.hovering svg{\n\t\tfill: var(--light);\n\t}\n\t@media(min-width: 420px){\n\t\t.container :global(.collection, .galleryitem) {\n\t\t\twidth: calc(22vw - 3em);\n\t\t}\n\t}\n\n\t.about{\n\t\tbackground: var(--dark);\n\t\tcolor: var(--light);\n\t\twidth: 100vw;\n\t\theight: 100vh;\n\t\tposition: fixed; top: 0; left: 0;\n\t}\n\t.about p{\n\t\tfont-weight: 200;\n\t\ttext-align: center;\n\t\twidth: 40%;\n\t\tmax-width: 800px;\n\t\tpadding-top: 140px;\n\t\tmargin: auto;\n\t}\n</style>\n<div class=\"container\" style=\"height: 50px; margin-bottom: 20px; margin-top: 25px\">\n{#if $activeCollection==0}\n\t<div class=\"menu\" on:mouseenter=\"{handleHover}\" on:mouseleave=\"{handleHover}\">\n\t\t<a on:click=\"{handleAbout}\" class:hovering=\"{menuHover === true}\" class=\"links\" href=\"about\">About</a>\n\t\t<div class:hovering=\"{menuHover === true}\" class=\"stacks-logo\" in:fly=\"{{ y: -50, duration: 400 }}\" out:fly=\"{{ y: -50, duration: 400 }}\">\n\t\t\t<svg width=\"65px\" height=\"24px\" viewBox=\"0 0 65 24\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n\t\t\t\t\t<g transform=\"translate(-12.000000, -22.000000)\" fill-rule=\"nonzero\">\n\t\t\t\t\t\t<path d=\"M28.664,22.376 C30.152,22.376 31.784,23.72 31.784,25.28 C31.784,27.464 28.424,31.616 26.768,31.616 C26.144,31.616 25.064,30.68 25.064,30.152 C25.064,29.6 25.88,28.88 26.624,28.16 C27.32,27.464 27.656,26.792 27.896,26.792 C28.136,26.792 28.904,27.632 28.904,27.632 C29.576,27.056 30.44,26.024 30.44,25.064 C30.44,24.728 30.032,24.296 29.648,24.296 C26.648,24.296 21.224,28.376 21.224,31.112 C21.224,33.512 27.44,34.304 27.44,37.616 C27.44,41.576 22.64,45.464 18.368,45.464 C15.44,45.464 12.8,42.344 12.8,41.792 C12.8,41.48 13.04,41.144 13.328,41.144 C13.544,41.144 15.104,42.968 17.648,42.968 C20.864,42.968 24.2,40.136 24.2,37.472 C24.2,34.448 18.488,34.016 18.488,30.08 C18.488,26.36 24.632,22.376 28.664,22.376 Z M32.624,41.312 C31.04,41.312 28.904,39.992 28.904,38.096 C28.904,36.536 30.032,33.896 31.184,31.568 C30.56,31.304 30.176,30.728 30.176,30.488 C30.176,30.344 30.344,30.152 30.488,30.152 C30.656,30.152 30.92,30.416 31.736,30.488 C32.72,28.568 33.584,27.032 33.584,26.816 C33.584,26.624 33.632,26.456 33.848,26.456 C34.472,26.456 35.504,27.344 35.504,28.28 C35.504,28.904 35.288,29.12 34.544,30.44 C35.576,30.392 36.512,30.32 36.728,30.32 C37.112,30.32 37.208,30.392 37.208,30.632 C37.208,30.872 36.512,32.048 35.624,32.048 C35.216,32.048 34.496,32 33.776,31.928 L32.96,33.656 C31.472,36.896 31.352,38.024 31.352,38.528 C31.352,39.296 31.664,39.92 32.48,39.92 C33.488,39.92 35.168,37.856 36.152,36.488 C36.56,35.912 36.68,35.72 36.8,35.72 C36.992,35.72 37.376,36.296 37.376,36.656 C37.376,37.016 37.28,37.304 36.776,37.952 C35.864,39.152 34.232,41.312 32.624,41.312 Z M44.384,41.192 C43.328,41.192 42.392,40.616 41.984,39.944 C41.84,39.68 41.816,39.224 41.816,38.912 L41.816,38.6 C41.816,38.6 40.016,41.336 38.504,41.336 C37.016,41.336 35.624,39.728 35.624,38.36 C35.624,35.816 39.344,30.848 41.768,30.848 C42.872,30.848 44.096,31.904 44.096,32.696 C44.096,32.696 44.456,32.456 44.648,32.456 C45.152,32.456 46.352,33.248 46.352,33.584 C46.352,33.92 44.888,35.696 44.312,37.472 C44,38.432 43.928,38.96 43.928,39.2 C43.928,39.584 44.288,39.8 44.6,39.8 C45.104,39.8 46.736,37.856 47.72,36.488 C48.128,35.912 48.248,35.72 48.368,35.72 C48.56,35.72 48.944,36.296 48.944,36.656 C48.944,37.016 48.848,37.304 48.344,37.952 C47.432,39.152 45.896,41.192 44.384,41.192 Z M42.272,32.888 C41.144,32.888 37.904,37.4 37.904,39.392 C37.904,39.752 38.216,39.944 38.552,39.944 C39.104,39.944 41.168,37.712 42.056,36.152 C41.984,36.032 41.912,35.96 41.912,35.792 C41.912,35.384 42.872,34.592 42.872,33.464 C42.872,33.104 42.584,32.888 42.272,32.888 Z M51.992,41.336 C49.88,41.336 47.576,39.896 47.576,37.232 C47.576,34.64 50.792,30.944 52.976,30.944 C54.392,30.944 55.52,32.024 55.52,32.96 C55.52,34.04 54.656,36.008 54.056,36.008 C53.456,36.008 52.904,35.408 52.904,35.24 C52.904,35.168 52.976,35.072 53.12,34.928 C53.552,34.496 54.248,33.584 54.248,32.912 C54.248,32.696 54.104,32.6 53.936,32.6 C52.544,32.6 50.24,35.84 50.24,37.88 C50.24,39.104 51.08,39.992 52.112,39.992 C53.528,39.992 55.232,37.856 56.216,36.488 C56.624,35.912 56.744,35.72 56.864,35.72 C57.056,35.72 57.44,36.296 57.44,36.656 C57.44,37.016 57.344,37.304 56.84,37.952 C55.928,39.152 54.2,41.336 51.992,41.336 Z M62.816,32.264 C61.976,32.264 59.264,36.032 58.904,37.04 C60.728,37.04 63.128,34.304 63.128,32.672 C63.128,32.408 63.056,32.264 62.816,32.264 Z M62.384,41.528 C59.864,41.528 59.12,38.624 58.208,38.552 C58.208,38.552 57.248,40.568 57.2,41.024 C57.176,41.288 56.936,41.408 56.72,41.408 C56.504,41.408 55.208,41.096 55.208,40.16 C55.208,39.224 55.448,38.192 57.2,33.608 C58.952,29.024 59.96,27.08 59.96,26.696 C59.96,26.528 60.104,26.48 60.344,26.48 C60.584,26.48 62.048,27.104 62.048,27.584 C62.048,28.064 60.632,30.92 59.312,34.52 C59.84,33.968 61.568,31.112 63.008,31.112 C64.448,31.112 65.144,32.072 65.144,33.776 C65.144,36.104 62.768,37.688 60.872,38.072 C62,38.576 62.288,39.512 62.984,39.512 C64.016,39.512 65.336,37.856 66.32,36.488 C66.728,35.912 66.848,35.72 66.968,35.72 C67.16,35.72 67.544,36.296 67.544,36.656 C67.544,37.016 67.448,37.304 66.944,37.952 C66.032,39.152 63.992,41.528 62.384,41.528 Z M64.664,38.792 C64.664,38.168 65.192,37.448 65.744,37.28 C66.872,35.672 68.36,33.824 69.296,32.216 C69.752,30.464 70.592,28.76 71.168,28.76 C72.104,28.76 73.112,29.504 73.112,30.272 C73.112,30.848 72.08,32.072 71.264,33.128 C71.264,35.048 72.704,35.336 72.704,38.072 C72.704,38.456 72.536,38.936 72.536,38.936 C73.664,38.24 74.576,37.28 75.152,36.488 C75.56,35.912 75.68,35.72 75.8,35.72 C75.992,35.72 76.376,36.296 76.376,36.656 C76.376,37.016 76.256,37.256 75.752,37.952 C74.336,39.896 71.864,41.384 69.224,41.384 C66.656,41.384 64.664,39.992 64.664,38.792 Z M66.776,38.216 C66.776,38.744 67.64,39.848 68.456,39.848 C69.344,39.848 69.968,38.696 69.968,37.232 C69.968,35.744 69.8,33.776 69.8,33.776 C68.96,35.096 67.952,36.608 66.776,38.216 Z\" id=\"Stacks\"></path>\n\t\t\t\t\t</g>\n\t\t\t</svg>\n\t\t</div>\n\t\t<a class:hovering=\"{menuHover === true}\" target=\"_blank\" class=\"links\" href=\"https://github.com/cssandstuff/portfolio-scaffold\">Github</a>\n\t</div>\n{/if}\n</div>\n\n<div class=\"container\">\n\t<!-- <GalleryStack width=\"\" name=\"Ongakukai\" color=\"44, 47, 90\" lowresdir=\"images/16_ongakukai\" hiresdir=\"images/16_ongakukai/originals\" imagecollection={collection0} id=\"{uid++}\" /> -->\n\t<GalleryStack width=\"\" name=\"Painterly\" color=\"261, 27, 71\" lowresdir=\"images\" hiresdir=\"images/originals\" imagecollection={collection1} id=\"{uid++}\" />\n\t<GalleryStack width=\"\" name=\"Splashes\" color=\"206, 69, 88\" lowresdir=\"images\" hiresdir=\"images/originals\" imagecollection={collection2} id=\"{uid++}\" />\n\t<GalleryStack width=\"\" name=\"Citizens of science\" color=\"182, 37, 73\" lowresdir=\"images\" hiresdir=\"images/originals\" imagecollection={collection3} id=\"{uid++}\" />\n\t<GalleryStack width=\"\" name=\"Travelling\" color=\"209, 25, 24\" lowresdir=\"images\" hiresdir=\"images/originals\" imagecollection={collection4} id=\"{uid++}\" />\n\t<GalleryStack width=\"\" name=\"Angry at kids\" color=\"13, 92, 87\" lowresdir=\"images\" hiresdir=\"images/originals\" imagecollection={collection5} id=\"{uid++}\" />\n\t<GalleryStack width=\"\" name=\"Sketches\" color=\"109, 0, 76\" lowresdir=\"images\" hiresdir=\"images/originals\" imagecollection={collection6} id=\"{uid++}\"  />\n</div>\n{#if about }\n<div on:click={handleAbout} class=\"about\" in:fly=\"{{ y: -20, duration: 400 }}\" out:fly=\"{{ y: 0, duration: 400 }}\">\n<p>This started out as a small code challenge to start getting to grips with Svelte v3 & to see if I could build a procreate-inspired UI for a gallery of images.<br/><br/>\nI'm hopefully going to move it into Sapper and see if I can have a proper url structure and transition between routes.</p>\n</div>\n{/if}",
    "<script context=\"module\">\n  // TODO: refactor. also, keyboard navigation: make outline/hotspots consistent/prettier.\n  // add dark mode.\n  // for wizardry to keep tabs on the collections\n  const elements = new Set();\n  //export let _resetStacks;\n</script>\n\n<script>\n  // This component shows a cover image with dummy images (spans) behind to \n  // give an indication of gallery/stack quantity\n  // The stack also splays out slightly on-hover.\n\n  // We're also have a child component in here which loads & shows all images from the user-selected stack.\n  import Image from './Image.svelte';\n  import Spinner from './Spinner.svelte';\n  import GalleryExpanded from './GalleryExpanded.svelte';\n  import { onMount, createEventDispatcher } from 'svelte';\n  import { fly, fade } from 'svelte/transition';\n  import { activeCollection, destroyingExpandedGallery, loadingSecondary } from './stores.js';\n  \n  export let imagecollection;\n  export let lowresdir;\n  export let hiresdir;\n  export let id = 0;\n  export let name;\n  export let color;\n\n  const dispatch = createEventDispatcher();\n  const sleep = msec => new Promise(resolve => setTimeout(resolve, msec));\n\n  // placeholders for objects that we'll iterate over\n  let collection;\n  let galleryExpanded;\n  let fakeImages;\n  let firstImage;\n\n  // reference to orginal colour\n  let originalbgcolor;\n\n  // count for loading\n  let count = 0;\n  \n  // booleans\n  let attemptingtoLoad = false;\n\n  onMount(() => {\n\t\tfakeImages = collection.getElementsByTagName('div');\n    firstImage = collection.getElementsByTagName('img')[0];\n    \n    // some wizardry for keeping tabs on the collections\n    elements.add(collection);\n\t\treturn () => elements.delete(collection);\n  });\n  \n  \n  // Rotate image stack on hover over\n  function rotate() {\n    //collection.style.transform = 'rotate(-1.5deg)';\n    Object.entries(fakeImages).forEach(([key, value]) => {\n      value.style.transform = 'rotate(' + ((parseInt(key)* 4) + 5)+ 'deg)';\n    })\n    firstImage.style.transform = 'scale(1.03) translateY(5px) rotate(-1deg)';\n  }\n\n  // Un-Rotate image stack on hover out\n  function unRotate() {\n    //collection.style.transform = 'rotate(0deg)';\n    Object.entries(fakeImages).forEach(([key, value]) => {\n      value.style.transform = 'rotate(' + (2 * (parseInt(key)+ 1))+ 'deg)';\n    })\n    firstImage.style.transform = 'scale(1) rotate(0deg)';\n  }\n\n  // Initiate the gallery and expand the stack\n  function showContents(event){\n    attemptingtoLoad = true;\n    event.preventDefault();\n\n    originalbgcolor = getComputedStyle(document.documentElement).getPropertyValue('--bgcolor');\n    if(color){\n      \n      let hslcolor = color.split(\",\");\n\n      // Can I do this automatically to find the primary color of the image?\n      document.documentElement.style.setProperty('--bgcolor', `hsla(${hslcolor[0]}, ${hslcolor[1]}%, ${hslcolor[2]}%, 1)`);\n      document.documentElement.style.setProperty('--bgcolortint', `hsla(${hslcolor[0]}, ${hslcolor[1]}%, ${hslcolor[2]}%, 0.6)`);\n      document.documentElement.style.setProperty('--bgcolordarktint', `hsl(${hslcolor[0]}, ${hslcolor[1]}%, ${hslcolor[2]/hslcolor[1] * 10}%)`);\n    }\n\n    // this sets the loading to true.\n    loadingSecondary.update(n => true);\n    \n    // sets which stack needs to be expanded.\n    activeCollection.update(n => id);\n    blowStacks();\n  }\n\n  // Blow away the other stacks when we're initiating an Expanded Gallery\n  function blowStacks(){\n    \n    let centerX = document.documentElement.clientWidth/2;\n    let centerY = document.documentElement.clientHeight/2;\n    \n    elements.forEach(element => {\n      var rect = element.getBoundingClientRect();\n      element.classList.add('neardeath');\n      let myId = parseInt(element.dataset.id);\n      element.classList.add('no-pointer-events');\n      if(myId!==$activeCollection){\n        element.style.transform = `translateX(${rect.left/3 - centerX/3}px) translateY(${rect.top/3 - centerY/3}px)`\n      }\n    });\n\n  }\n\n  // Function for bringing the stacks back after we've closed an Expanded Gallery\n  function resetStacks(){\n    console.log('resetting...');\n    \n    document.documentElement.style.setProperty('--bgcolor', originalbgcolor);\n    \n    // Tells the expanded gallery that we're about to destroy it, so we can then call the consolitateStuff() function.\n    // might be able to call the funtion directly instead of this??\n    destroyingExpandedGallery.update(n => true);\n\n    elements.forEach(element => {\n      element.classList.remove('neardeath'); \n    });\n    \n    (async () => {\n      await sleep(200);\n      activeCollection.update(n => 0);\n      attemptingtoLoad = false;\n\n      elements.forEach(element => {\n        element.style.transform = `translateX(0px) translateY(0px)` \n      });\n\n    })();\n    (async () => {\n      await sleep(600);\n      elements.forEach(element => {\n        element.classList.remove('no-pointer-events');\n      });\n    })();\n  }\n  \n  // Wanted to maybe have a loader, so the following will let us know when all\n  // Image components in an Expanded Gallery have loaded.\n  function handleLoadingComplete(event) {\n    count = count + event.detail.loadingComplete;\n    if(count === imagecollection.length){\n      \n      console.log(\"Loading complete\");\n      loadingSecondary.update(n => false);\n\n      count = 0;\n    }\n  }\n</script>\n\n<style>\n  /* These refer to the darkness class, none or total */\n  h2{\n    position: absolute; bottom: -60px; left: -10px;\n    font-weight: 200;\n    padding: 0.5em 0 0.5em 0.5em;\n    margin-left: 0.8em;\n    font-size: 0.9em;\n    color: #222;\n    display: block;\n    width: 99%;\n  }\n  h2:after{\n    position: relative;\n    display: block;\n    content: '';\n    height: 1px;\n    width: 100%;\n    bottom: -8px;\n    background: linear-gradient(to right, rgba(0,0,0,0.03) 0%, rgba(0,0,0,0.1) 25%,rgba(0,0,0,0.1) 55%, rgba(0,0,0,0) 100%);\n  }\n  h2 span{\n    display: block;\n    color: #a9a9a9;\n    font-size: 0.8em\n  }\n  .collection.active{\n    z-index: 2 !important;\n    opacity: 0.6;\n  }\n  .collection.nonactive{\n    opacity: 0;\n    pointer-events: none;\n  }\n\n  .collection :global(.loader){\n    border-radius: 4px;\n  }\n\n  .dummyimage{\n    border: 1px solid #d6d6d6;\n    background: rgba(255,255,255,0.8);\n    border-radius: 4px;\n    display: block;\n    width: 100%;\n    height: 100%;\n    position: absolute; top: 0; left: 0;\n    transition: 0.15s transform ease-out;\n  }\n\n  .collection:hover span{\n    transition: 0.3s transform ease-out;\n  }\n\n  .collection{\n    position: relative;\n    transition: 0.2s all ease-out;\n  }\n\n  .collection:hover{\n    transition: 0.3s all ease-out;\n  }\n\n  .collection :global(img) {\n    position: absolute;\n    top: 0; left: 0;\n    box-shadow: 0 0 2px #ccc;\n    /* transition: 0.15s all ease-out; */\n    border-radius: 4px;\n  } \n\n  .collection:hover :global(img){\n    transition: 0.3s all ease-out;\n  }\n\n  .collection :global(img:first-child){\n    box-shadow: 0px 1px 3px rgba(90,90,90, 0.3)\n  }\n  .collection:hover :global(img:first-child){\n    box-shadow: 0px -5px 30px rgba(90,90,90, 0.3)\n  }\n\n  .breadcrumb{\n    opacity: 1;\n    position: fixed;\n    top: 0; left: 0;\n    width: 100vw; height: 20px;\n    z-index: 99;\n    padding: 10px;\n    cursor: pointer;\n    font-weight: bold;\n    font-size: 1.2em;\n  }\n    .breadcrumb p{\n      margin: 0;\n      position: relative;\n      display: block;\n      color: #333;\n      padding-left: 16px;\n      text-transform: none;\n    }\n    .breadcrumb p:before, .breadcrumb p:after{\n      content: '';\n      display: block;\n      position: absolute;\n      left: 6px; top: 9px;\n      height: 6px; width: 2px;\n      background: currentColor;\n      transform: rotate(45deg);\n      transition: 0.3s all;\n    }\n    .breadcrumb p span{\n      text-transform: none;\n      font-weight: 300;\n      color: rgba(255,255,255,0.9);\n      font-size: 0.9em;\n    }\n    .breadcrumb p:hover:before{\n      transform: translateX(-2px) rotate(45deg);\n    }\n    .breadcrumb p:hover:after{\n      transform: translateX(-2px) rotate(-45deg);\n    }\n    .breadcrumb p:after{\n      top: 12px;\n      transform: rotate(-45deg);\n    }\n\n  .loading--false{\n    opacity: 1;\n    pointer-events: auto;\n  }\n  .loading--true{\n    opacity: 0;\n    pointer-events: none;\n  }\n\n  \n  \n</style>\n\n{#if $activeCollection == id}\n  <div id=\"breadcrumb\" class=\"breadcrumb\" on:click={resetStacks} in:fly=\"{{ y: -40, duration: 400 }}\" out:fly=\"{{ y: -40, duration: 400 }}\" >\n    <p>{name}</p>\n  </div>\n{/if}\n\n<a href=\"{imagecollection[0].hires}\" class:active=\"{id === $activeCollection && $loadingSecondary == true}\" \n     class:nonactive=\"{$activeCollection!== 0 && id !== $activeCollection}\" \n     class=\"collection\" \n     data-id={id} \n     bind:this={collection} \n     on:mouseenter={rotate} \n     on:mouseleave={unRotate} \n     on:click={showContents}>\n\n  <!-- in case we want a spinner  -->\n  {#if $activeCollection == id}\n    <Spinner />\n  {/if}\n  <!-- Initial Stacked Gallery, we only load the first image -->\n  {#each imagecollection as image, index}\n    {#if index==0}\n      <Image image=\"{image.lowres}\" />\n    {:else}\n      <div class=\"dummyimage\" style=\"transform: rotate({index * 2}deg); z-index: -{index}; opacity: {1 - 1/imagecollection.length * index/1.2}\"></div>\n    {/if}\n  {/each}\n  <h2>\n    {name}\n    <span>({imagecollection.length} Images)</span>\n  </h2>\n</a>\n\n<!-- Real Gallery, we load all images and then it can be expanded -->\n{#if attemptingtoLoad}\n  <!-- {@debug imagecollection} -->\n   <div class=\"loading--{$loadingSecondary}\">\n    <GalleryExpanded bind:this={galleryExpanded} stack={imagecollection} originaltarget={collection} on:loadingComplete=\"{handleLoadingComplete}\"  />\n  </div>\n{/if}",
    "<script>\n  // This handles the lazy loading of images, or the best I could copy or come up with\n  import { onMount } from 'svelte';\n  import { createEventDispatcher } from 'svelte';\n  export let image;\n  export let visible = 0;\n\n  let height;\n  let width;\n  const dispatch = createEventDispatcher();\n\n  onMount(async () => {\n    const res = await fetch(image);\n    if(res.status === 200){\n       image = res.url;\n       console.log(`this is the url ${image}`)\n       const loader = new Image();\n       loader.onload = () => {\n         visible = true;\n         height = loader.height;\n         width = loader.width;\n         dispatch('loadingComplete', {\n          loadingComplete: 1\n         });\n       }\n       loader.src = image;\n    }else{\n      visible = false\n    }\n  });\n  \n</script>\n\n<style>\n  .opacity--0{\n    opacity: 0;\n  }\n  .loader{\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    background: rgba(0,0,0,0.04);\n    z-index: 11;\n    left: 0;\n    display: block;\n    transition: 0.2s all;\n    /* animation: loading 4s infinite linear; */\n    pointer-events: none;\n    overflow: hidden;\n  }\n\n  .inner{\n    width: 300%;\n    height: 300%;\n    top: 0 ; left: 0;\n    animation: shimmer 3s linear infinite;\n    background: linear-gradient(to right, rgba(0,0,0,0.03) 0%, rgba(0,0,0,0.1) 90%,rgba(0,0,0,0.1) 95%, rgba(0,0,0,0) 100%);\n  }\n\n  img{\n    display: block;\n    object-fit: cover;\n    transition: 0.4s all ease-out;\n    justify-self: center;\n    align-self: center;\n    min-width: 100%;\n    min-height: 100%;\n    width: 100%;\n    height: 100%;\n  }\n  @keyframes shimmer {\n    0%{\n      transform: rotate(-15deg) translateX(-100%) translateY(-50%);\n    }\n    100%{\n      transform: rotate(-15deg) translateX(100%) translateY(-50%);\n    }\n  }\n  @keyframes loading{\n    0%{\n      height: 0%;\n      top: auto;\n      bottom: 0;\n    }\n    50%{\n      height: 100%;\n      top: auto;\n      bottom: 0;\n    }\n    51%{\n      top: 0;\n      bottom: auto;\n      height: 100%;\n    }\n    100%{\n      top: 0;\n      bottom: auto;\n      height: 0%;\n    }\n  }\n</style>\n{#if visible}\n<img src=\"{image}\" alt=\"\" class=\"{visible ? '' : 'opacity--0'}\">\n{:else}\n  <div class=\"loader\">\n    <div class=\"inner\"></div>\n  </div>\n{/if}\n\n\n\n",
    "<style>\n.spinner {\n    /* animation: rotate 4s linear infinite; */\n    z-index: 100;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n.inner{\n  width: 300%;\n  height: 300%;\n  top: 0 ; left: 0;\n  animation: shimmer 3s linear infinite;\n  background: linear-gradient(to right, rgba(0,0,0,0.03) 0%, rgba(0,0,0,0.1) 90%,rgba(0,0,0,0.1) 95%, rgba(0,0,0,0) 100%);\n}\n\n@keyframes shimmer {\n\t0%{\n\t\ttransform: rotate(-15deg) translateX(-100%) translateY(-50%);\n\t}\n\t100%{\n\t\ttransform: rotate(-15deg) translateX(100%) translateY(-50%);\n\t}\n}\n/*\n  .spinner .path {\n      stroke: #ccc;/* rgb(26, 118, 211);\n      stroke-linecap: round;\n      animation: dash 3s ease-in-out infinite;\n      animation: shimmer 3s linear infinite;\n      /* box-shadow: 2px 2px 10px #000; \n  } \n  @keyframes rotate {\n    100% {\n      transform: rotate(-360deg);\n    }\n  }\n\n  @keyframes dash {\n    0% {\n      stroke-dasharray: 20,10;\n      stroke-dashoffset: 60;\n      stroke-width: 2;\n    }\n    30%{\n      stroke-dasharray: 50, 50;\n      stroke-dashoffset: 50;\n      stroke-width: 10;\n    }\n    70% {\n      stroke-dasharray: 200, 150;\n      stroke-dashoffset: -100;\n      stroke-width: 100;\n    }\n    100% {\n      stroke-dasharray: 200, 150;\n      stroke-dashoffset: -100;\n      stroke-width: 100;\n      opacity: 0;\n    }\n  } */\n  \n</style>\n\n<div class=\"spinner\">\n<div class=\"inner\"></div>\n<!-- <rect class=\"path\" id=\"Rectangle\" fill=\"none\" x=\"0.5\" y=\"0.5\" width=\"50\" height=\"50\"></rect> -->\n<!-- <circle class=\"path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\" stroke-width=\"3\"></circle> -->\n</div>\n<!--<svg class=\"spinner\" viewBox=\"0 0 40 40\">\n <polygon class=\"path\" id=\"Star\" fill=\"none\" stroke-width=\"2\" points=\"21 35.7417225 15.3653489 39.1898595 12.4893823 33.2427796 5.88500851 33.0972147 6.68082558 26.5393478 1.20357116 22.8462968 5.41850557 17.7597193 2.80736009 11.6916997 9.10319994 9.69136407 10.1871837 3.17492934 16.5650443 4.8959279 21 0 25.4349557 4.8959279 31.8128163 3.17492934 32.8968001 9.69136407 39.1926399 11.6916997 36.5814944 17.7597193 40.7964288 22.8462968 35.3191744 26.5393478 36.1149915 33.0972147 29.5106177 33.2427796 26.6346511 39.1898595\"></polygon>\n<polygon class=\"path\" id=\"Star\" stroke-width=\"2\" fill=\"none\" points=\"18 37.0914249 0.679491924 31 4.0644173 12.9542876 18 1 31.9355827 12.9542876 35.3205081 31\"></polygon>\n</svg>-->",
    "<script>\n  // This component expands the stack to show all images within the stack\n  // and then loads higher res images (if user clicks an image) and displays \n  // them in a prev/next style lightbox.\n\n  import Image from './Image.svelte';\n  import Spinner from './Spinner.svelte';\n  import { onMount, afterUpdate, onDestroy, createEventDispatcher } from 'svelte';\n  import { destroyingExpandedGallery, loadingSecondary } from './stores.js';\n  import { fade } from 'svelte/transition';\n  //import { _resetStacks } from './GalleryStack.svelte';\n\n  export let stack;\n  export let lowresdir;\n  export let hiresdir;\n  export let originaltarget;\n\n  const dispatch = createEventDispatcher();\n\n  // references to divs\n  let activeCollection;\n  let thirdLevel;\n\n  // placeholders for objects that we'll iterate over\n  let images;\n  let hiresImages;\n  let currentTitle;\n\n  // indexes of the current image (why are there two??)\n  let current;\n\n  // Scroll position stuff\n  let y;\n  let originalScrollPos;\n  let hiresScrollPos;\n\n  // x + y for center of document\n  let centerX = document.documentElement.clientWidth/2;\n  let centerY = document.documentElement.clientHeight/2;\n\n  // Offset transition distance for hi-res lightbox \n  let offset = 25;\n  \n  // Handles transition of single gallery image when it transitions to hi-res.\n  let transitionHandler;\n  \n  // count for loading\n  let count = 0;\n\n  // booleans, do I need so many?\n  let showTitles          = true;\n  let hiresLoaded         = false;\n  let ready               = false;\n  let loadedSuccessfully  = false;\n  let expandedOnce        = false;\n  let transitioning       = false;\n  let closedGallery       = false;\n  \n  // could probably remove the need for this?\n  const sleep = msec => new Promise(resolve => setTimeout(resolve, msec));\n\n  // want a reference to each gallery items within the active Collection.\n  onMount(() => {\n    images = activeCollection.getElementsByClassName('galleryitem');  \n    // want the item in a stack on first mount\n    attemptToConsolidate();\n    \n  });\n\n  // Might be able to refactor this to not use AfterUpdate, \n  // but for now it seems ok.\n  afterUpdate(() => {\n    if(!$loadingSecondary && !$destroyingExpandedGallery && !expandedOnce){\n      expandStuff();\n      expandedOnce = true;\n    }\n    if($destroyingExpandedGallery && expandedOnce){\n      attemptToConsolidate();\n      expandedOnce = false;\n    }\n  });\n\n  onDestroy(() => {\n    console.log('being destroyed... laters');\n    destroyingExpandedGallery.update(n => false);\n  });\n\n  // could the following two function be consolidated into one?\n  function handleLoadingComplete(event){\n    count = count + event.detail.loadingComplete;\n    if(count === stack.length){\n      count = 0;\n      loadedSuccessfully = true;\n    }\n  }\n\n  function handleLoadingHiResComplete(event){\n    count = count + event.detail.loadingComplete;\n    if(count === stack.length){\n      count = 0;\n      hiresLoaded = true;\n    }\n    hiresImages = thirdLevel.getElementsByClassName('hi-image');\n  }\n\n  // Keyboard functionality.\n  function handleKeydown(event){\n    if(event.code == \"ArrowRight\"){\n      showNext();\n    }\n    if(event.code == \"ArrowLeft\"){\n      showPrevious();\n    }\n    if(event.code == \"Escape\"){\n      if(!closedGallery){\n        closeGallery();\n      }else{\n        document.getElementById(\"breadcrumb\").click();\n      }\n    }\n  }\n\n  // This is called on click of gallery item, to init the lightbox.\n  function loadLargeImages(event, index){\n    current = index;\n    event.preventDefault();\n\n    // animates clicked image into center of screen.\n    animateClicked(current);\n\n    // Gets the hi-res images into the DOM and loading\n    ready = true;\n  }\n  \n  // Function for bringing everything together. called onMount\n  // and when gallery is being destroyed.\n  function attemptToConsolidate(){\n    activeCollection.classList.add('no-pointer-events');\n\n    //sometimes the object is undefined I don't know why.\n    if(images !== undefined){\n      console.log(\"weren't me guv, everything normal...\");\n      performConsolidation();\n    \n    // not sure I'm even experiencing this bug anymore, but can't hurt to be sure?\n    }else{\n      console.log('object was undefined, hard luck son.');\n      \n      // Try again?\n      (async () => {\n        await sleep(180);\n        Object.entries(images).forEach(([key, value]) => {\n          console.log('trying again...');\n          performConsolidation();\n        });\n      })();\n    }\n  }\n\n  // sometimes the object is empty, so we want a function that only runs when the object is there.\n  // This is only called by the attemptToConsolidate function.\n  function performConsolidation(){\n    let rect = originaltarget.getBoundingClientRect();\n    \n    Object.entries(images).forEach(([key, value]) => {\n      let imageDivRect = value.getBoundingClientRect();\n      let transformedStyle = `translateX(${(rect.x + 4) - imageDivRect.x}px) translateY(${(rect.y + 4) - imageDivRect.y}px) rotate(${key * 4}deg)`;\n      \n      // If first image\n      if(key == 0){\n        transformedStyle = `translateX(${(rect.x + 4) - imageDivRect.x}px) translateY(${(rect.y + 6) - imageDivRect.y}px) scale(1.08) translateY(5px) rotate(-2deg)`;\n      }\n      \n      // stacks the zindex's of images so first is always on top.\n      value.style.zIndex = images.length - key;\n\n      // if gallery is being closed/destroyed we want a quicker transition.\n      if($destroyingExpandedGallery){\n\n        // Scroll to position we were at when item was first clicked.\n        window.scrollTo(0, originalScrollPos);\n        activeCollection.style.transform = `translateY(0px)`;\n        transformedStyle = `translateX(${rect.x - imageDivRect.x}px) translateY(${rect.y - imageDivRect.y}px) rotate(${key * 2}deg)`;\n        // Quick transition please.\n        value.classList.add('quicktransition');\n        // Set tranformed style (different if destroying)\n        value.style.transform = transformedStyle;\n\n      }else{\n        // Set tranformed style.\n        value.style.transform = transformedStyle;\n      }\n      \n    });\n  }\n\n  // Function for Expanding things into place.  \n  function expandStuff(){\n    \n    // Want items that are expanded to always be at the top of the viewport\n    originalScrollPos = scrollY;\n    window.scrollTo(0,0);\n    activeCollection.style.transform = `translateY(-${originalScrollPos}px)`;\n  \n    (async () => {\n      // Need to wait a little bit after scrollTo.\n      await sleep(80);\n      Object.entries(images).forEach(([key, value]) => {\n        var imageDivRect = value.getBoundingClientRect();\n        transitioning = true;\n        value.classList.add('slowtransition');\n        value.style.transform = `translateX(0px) translateY(${originalScrollPos}px)`; //translateY(${originalScrollPos}px)`;\n      });\n    })();\n\n    (async () => {\n      // sleep to wait for transition to end, maybe better to use transitionend ?\n      await sleep(500);\n      activeCollection.classList.remove('no-pointer-events');\n      transitioning = false;\n    })();\n  }\n\n  // animate clicked image to the center.\n  function animateClicked(current){\n    // This could probably be done more accurately, but it works ok for now.\n    let currentImage = images[current].getElementsByTagName('img')[0];\n    let rect = images[current].getBoundingClientRect();\n    let centerArea = centerX + centerY * 2;\n    let imageArea = rect.width + rect.height;\n\n    // Hide thumbnail titles, else they jump in front of transitioned image.\n    showTitles = false;\n\n    // Set active breadcrumb title\n    currentTitle = images[current].getElementsByTagName('h2')[0].innerText;\n    Object.entries(images).forEach(([key, value]) => {\n      value.style.zIndex = '1';\n    });\n\n    currentImage.classList.remove('notransition');\n    currentImage.classList.remove('quicktransition');\n    images[current].style.zIndex = '99';\n    hiresScrollPos = scrollY;\n\n    (async () => {\n      // Need to wait a bit after classes are removed.\n      await sleep(10);\n      currentImage.style.transform = `translateX(${centerX - rect.left - (rect.width/2)}px) translateY(${centerY - rect.top - (rect.height/2)}px) scale(${centerArea/imageArea})`;\n      currentImage.addEventListener('transitionend', transitionHandler = () => {\n        console.log('Transition ended');\n        document.getElementsByTagName(\"body\")[0].classList.add('locked');\n      });\n    })();\n    closedGallery = false;\n  }\n\n  function showPrevious(){\n    if(current <= 0) {\n      hiresImages[0].style.transform = `translateX(${offset}px)`;\n      hiresImages[stack.length - 1].style.transform = `translateX(-${offset}px)`;\n      (async () => {\n        // sleep while animation happens\n        await sleep(200);\n        current = stack.length - 1;\n        setImagePos(current);\n        currentTitle = images[current].getElementsByTagName('h2')[0].innerText;\n      })();\n    }else{\n      hiresImages[current].style.transform = `translateX(${offset}px)`;\n      hiresImages[current - 1].style.transform = `translateX(-${offset}px)`;\n      (async () => {\n        // sleep while animation happens\n        await sleep(200);\n        current--;\n        setImagePos(current);\n        currentTitle = images[current].getElementsByTagName('h2')[0].innerText;\n      })();\n    }\n  }\n  \n  function showNext(){\n    if(current >= (stack.length - 1)) {\n      hiresImages[0].style.transform = `translateX(${offset}px)`;\n      hiresImages[stack.length - 1].style.transform = `translateX(-${offset}px)`;\n      (async () => {\n        // sleep while animation happens\n        await sleep(200);\n        current = 0;\n        setImagePos(current);\n      })();\n    }else{\n      hiresImages[current].style.transform = `translateX(-${offset}px)`;\n      hiresImages[current + 1].style.transform = `translateX(${offset}px)`;\n      (async () => {\n        // sleep while animation happens\n        await sleep(200);\n        current++;\n        setImagePos(current);\n      })();\n    }\n    \n  }\n\n  // Sets non-active gallery items to a position where they can shrink from when the hi-res gallery is closed.\n  function setImagePos(current){\n    let rect = images[current].getBoundingClientRect();\n    \n    let centerArea = centerX + centerY * 2;\n    let imageArea = rect.width + rect.height;\n    let currentImage = images[current].getElementsByTagName('img')[0];\n\n    \n    Object.entries(images).forEach(([key, value]) => {\n      value.style.zIndex = '1';\n      value.firstChild.classList.add('notransition');\n      value.firstChild.classList.remove('hitransition');\n      value.firstChild.style.transform = `translateX(0) translateY(0px) scale(1)`;\n    });\n\n    images[current].style.zIndex = '99';\n    currentImage.style.transform = `translateX(${centerX - rect.left - (rect.width/2)}px) translateY(${centerY - rect.top - (rect.height/2)}px) scale(${centerArea/imageArea})`;\n    currentTitle = images[current].getElementsByTagName('h2')[0].innerText;\n  }\n\n  function closeGallery(){\n      let currentImage = images[current].getElementsByTagName('img')[0];\n      let currentTransformPos = currentImage.style;\n      currentImage.removeEventListener('transitionend', transitionHandler ,false);\n\n      // this is tricky because we might need two offset values\n      window.scrollTo(0, hiresScrollPos);\n      document.getElementsByTagName(\"body\")[0].classList.remove('locked');\n\n      currentImage.classList.remove('notransition');\n      currentImage.classList.add('hitransition');\n\n      (async () => {\n        // wait for animation to end.\n        await sleep(200);\n        currentImage.style.transform = `translateX(0) translateY(0) scale(1)`;\n        ready = false;\n        hiresLoaded = false;\n        showTitles = true;\n      })();\n      \n      closedGallery = true;\n  }\n\n</script>\n\n<style>\n  /* TODO: Clean+optimise these a little, get rid of any globals. */\n  h2{\n    position: absolute; bottom: -50px; left: -10px;\n    font-weight: 200;\n    padding: 0.5em 0;\n    margin-left: 0.8em;\n    font-size: 0.9em;\n    color: #222;\n    opacity: 0;\n    width: 99%;\n    transition: 0s opacity;\n  }\n\n  h2:after{\n    position: relative;\n    display: block;\n    content: '';\n    height: 1px;\n    width: 100%;\n    bottom: -8px;\n    background: linear-gradient(to right, rgba(0,0,0,0.03) 0%, rgba(0,0,0,0.1) 25%,rgba(0,0,0,0.1) 55%, rgba(0,0,0,0) 100%);\n  }\n\n  .in{\n    opacity: 1;\n    transition: 0.4s 0.6s opacity;\n  }\n  .out{\n    opacity: 0 !important;\n  }\n\n  .stack{\n    position: absolute !important;\n    top: 2em; right: 2em;\n    width: calc(100vw - 4em) !important;\n    z-index: 3;\n  }\n  .stack a{\n    display: block;\n  }\n  .stack :global(img) {\n    box-shadow: 0 0 2px #ccc;\n    border-radius: 4px;\n    background: #ccc;\n  }\n  .transitioning :global(img) {\n    transition: 0s all;\n  }\n  .transitioning .magnify {\n    display: none;\n  }\n  .stack :global(.slowtransition) {\n    /* transition: all 3.6s cubic-bezier(0,0,.13,1.33) !important; */\n    transition: all 0.5s cubic-bezier(0.38, 0.56, 0.21, 1.15) !important;\n  }\n  .stack :global(.quicktransition) {\n    transition: transform 0.2s cubic-bezier(0,0,.13,1.2), opacity 0.3s ease-out !important;\n    opacity: 0.5;\n  }\n  .stack :global(.hitransition) {\n    transition: transform 0.33s cubic-bezier(0,0,.13,1.1);\n    opacity: 1;\n  }\n  .stack :global(a:first-child.quicktransition) {\n    transition: transform 0.2s cubic-bezier(0,0,.13,1.06) !important;\n    opacity: 1;\n  }\n\n  .gallery{\n    display: flex;\n    flex: 1 auto;\n    flex-flow: row wrap;\n    align-content: flex-start;\n    justify-content: center;\n  }\n\n  .gallery a{\n    position: relative;\n    margin: 1em 1.5em 3em 1.5em;\n  }\n  \n  .gallery a:hover .magnify{\n    opacity: 1;\n  }\n\n  .hires{\n    position: fixed;\n    top: 0; left: 0;\n    z-index: 99;\n    height: 100vh; width: 100vw;\n    background: #fff;\n    opacity: 0;\n    transition: 0.8s opacity;\n  }\n\n  .hires.ready{\n    opacity: 1;\n  }\n\n  .hires :global(img){\n    object-fit: contain;\n    position: absolute; top: 0;\n  }\n\n  .hires div{\n    opacity: 0;\n    transition: 0.3s all;\n    width: 100vw; height: 100vh;\n    position: absolute;\n  }\n  \n  .hires div.active{\n    opacity: 1;\n    transform: translateX(0) !important;\n  }\n\n  .previous, .next{\n    position: absolute;\n    top: calc(50vh - 60px);\n    background: rgba(255,255,255,0.05);\n    height: 120px; width: 80px;\n    cursor: pointer;\n    transition: 0.4s all;\n  }\n  .previous:hover, .next:hover{\n    background: rgba(255,255,255,0.15);\n  }\n  .previous:hover{\n    transform: translateX(-5px);\n  }\n  .next:hover{\n    transform: translateX(5px);\n  }\n  .previous:before, .previous:after, .next:before, .next:after{\n    content:'';\n    position: absolute;\n    width: 22px;\n    height: 2px;\n    background: #999;\n    right: 20px; top: 50px;\n  }\n  .previous:before{\n    transform: rotate(-45deg)\n  }\n  .previous::after{\n    transform: rotate(45deg);\n    top: 65px;\n  }\n  .next:before{\n    transform: rotate(45deg)\n  }\n  .next::after{\n    transform: rotate(-45deg);\n    top: 65px;\n  }\n  .previous{\n    left: 0;\n    border-radius: 0 20px 20px 0;\n  }\n  .next{\n    right: 0;\n    border-radius: 20px 0 0 20px;\n  }\n  .close{\n    color: #333;\n    left: 0.4em; top: 0.5em;\n    position: absolute;\n    font-weight: 300;\n    text-transform: none;\n    font-weight: bold;\n    font-size: 1.2em;\n    width: 25%; height: 40px;\n    padding-left: 18px;\n    cursor: pointer;\n  }\n  .close:before, .close:after{\n    content:'';\n    position: absolute;\n    width: 2px;\n    height: 6px;\n    background: #333;\n    left: 8px; top: 9px;\n  }\n  .close:hover:before{\n    transform: translateX(-2px); transform: rotate(45deg);\n  }\n  .close:hover:after{\n    transform: translateX(-2px); transform: rotate(-45deg);\n  }\n  .close:before{\n    transform: rotate(45deg);\n  }\n  .close:after{\n    transform: rotate(-45deg);\n    top: 12px;\n  }\n  .magnify{\n    width: 100%;\n    background-color: var(--bgcolortint);\n    height: 100%;\n    position: absolute; bottom: 0; right: 0;\n    opacity: 0;\n    transition: 0.3s opacity;\n  }\n  .magnify.out{\n    transition: 0s opacity;\n  }\n  .magnify:before{\n    content: '';\n    position: absolute;\n    right: calc(50% - 29px);\n    bottom: calc(50% - 16px);\n    width: 14px;\n    height: 4px;\n    background: #fff;\n    transform: rotate(45deg);\n  }\n  .magnify:after{\n    content: '';\n    width: 32px;\n    height: 32px;\n    border-radius: 50%;\n    border: 4px solid #fff;\n    position: absolute; left: calc(50% - 19px); top: calc(50% - 22px);\n    z-index: 9;\n  }\n  \n</style>\n\n<svelte:window bind:scrollY={y} on:keydown={handleKeydown}/>\n  <div class=\"stack gallery\" bind:this={activeCollection} >\n    {#each stack as image, index}\n      <a class:transitioning=\"{transitioning === true}\" class=\"galleryitem\" href=\"{hiresdir}/{image.src}\" on:click={e => loadLargeImages(e, index)}> \n        <Image image=\"{image.lowres}\" on:loadingComplete />\n        <span class:out=\"{showTitles === false}\" class=\"magnify\"></span>\n        <h2 class:out=\"{$destroyingExpandedGallery === true || showTitles === false}\" class:in=\"{$loadingSecondary === false && showTitles !== false && !$destroyingExpandedGallery}\">\n          {image.name}\n        </h2>\n      </a>\n    {/each}\n  </div>\n\n{#if ready}\n  {#if !hiresLoaded}\n    <Spinner />\n  {/if}\n  <div class=\"hires\" class:ready=\"{hiresLoaded === true}\" out:fade=\"{{duration: 100}}\" bind:this={thirdLevel}>\n    {#each stack as image, index}\n      <div class:active=\"{current === index}\" class=\"hi-image\" >\n        <Image image=\"{image.hires}\" on:loadingComplete={handleLoadingHiResComplete}/>\n      </div>\n    {/each}\n    <span class=\"previous\" on:click={showPrevious}></span>\n    <span class=\"next\" on:click={showNext}></span>\n    <span class=\"close\" on:click={closeGallery}>{currentTitle}</span>\n  </div>\n{/if}"
  ],
  "names": [],
  "mappings": "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"
}